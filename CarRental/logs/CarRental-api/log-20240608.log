2024-06-08T13:36:41.1878599+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:36:41.2863153+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("39"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:36:41.2955746+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:36:41.2987448+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:36:41.3260847+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2024-06-08T13:36:41.3492668+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20240531012447_update31"'.
2024-06-08T13:36:41.4664173+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240531012447_update31', N'7.0.9');"
2024-06-08T13:36:41.4813325+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) Applying migration '"20240531033709_update-img"'.
2024-06-08T13:36:41.5610792+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [Xe] ADD [HinhAnh1] nvarchar(max) NULL;"
2024-06-08T13:36:41.5682891+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [Xe] ADD [HinhAnh2] nvarchar(max) NULL;"
2024-06-08T13:36:41.5731699+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [Xe] ADD [HinhAnh3] nvarchar(max) NULL;"
2024-06-08T13:36:41.5785263+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""ALTER TABLE [Xe] ADD [HinhAnh4] nvarchar(max) NULL;"
2024-06-08T13:36:41.5816003+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240531033709_update-img', N'7.0.9');"
2024-06-08T13:36:42.1105049+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7046"
2024-06-08T13:36:42.1116859+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5273"
2024-06-08T13:36:42.1160461+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2024-06-08T13:36:42.1177646+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2024-06-08T13:36:42.1192512+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\DuAnThueXe\WebAPI_CarRental\CarRental"
2024-06-08T13:43:41.5872639+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:43:41.6828076+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:43:41.6902513+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:43:41.6934653+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:43:41.7202180+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2024-06-08T13:43:41.7469894+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2024-06-08T13:43:42.2613866+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7046"
2024-06-08T13:43:42.2641980+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5273"
2024-06-08T13:43:42.2766841+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2024-06-08T13:43:42.2858534+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2024-06-08T13:43:42.2880557+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\DuAnThueXe\WebAPI_CarRental\CarRental"
2024-06-08T13:44:32.3965029+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("30"ms) [Parameters=["@__model_IDLoaiKH_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [LoaiKhachHang] AS [l]
        WHERE [l].[IDLoaiKH] = @__model_IDLoaiKH_0 AND ([l].[TrangThai] <> N'Da xoa' OR ([l].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:44:32.5937546+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoaiKhachHang] ([IDLoaiKH], [TenLoaiKH], [TrangThai])
VALUES (@p0, @p1, @p2);"
2024-06-08T13:44:32.6164482+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/loai-kh/add" responded 200 in 999.1039 ms
2024-06-08T13:45:01.0013786+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:45:01.0124483+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@__model_Email_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [NhanVien] AS [n]
        WHERE [n].[Email] = @__model_Email_0 AND ([n].[TrangThai] <> N'Da xoa' OR ([n].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:45:01.0435388+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da Xoa' OR ([k].[TrangThai] IS NULL) OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:45:01.0972233+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KhachHang] ([IDKhachHang], [CCCD], [ChiNhanhNganHang], [DiaChiHienTai], [DiaChiThuongTru], [Email], [GPLX], [HoTen], [IDLoaiKH], [NganHang], [NgaySinh], [PassWord], [SoDienThoai], [SoDienThoaiDuPhong], [SoDienThoaiNguoiThamChieu], [SoPassPort], [SoTaiKhoan], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);"
2024-06-08T13:45:01.1012789+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 200 in 203.8808 ms
2024-06-08T13:45:23.6230755+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("35"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:45:23.6276553+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:45:23.7821101+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 202.0427 ms
2024-06-08T13:46:06.5129126+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:46:06.5164831+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:46:06.5370646+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 35.3317 ms
2024-06-08T13:46:21.9381409+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:46:21.9426340+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:46:21.9908373+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 55.6851 ms
2024-06-08T13:46:51.1830049+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:46:51.2251486+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/khach-hang/get-all" responded 200 in 55.8061 ms
2024-06-08T13:47:42.9791184+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:47:42.9833967+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:47:43.0200927+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 60.3552 ms
2024-06-08T13:47:45.3145762+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:47:45.3183515+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:47:45.3731800+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 61.7608 ms
2024-06-08T13:49:47.9599694+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("7"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:49:47.9636895+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:49:47.9885735+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 52.7751 ms
2024-06-08T13:49:56.7090592+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("18"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:49:56.7119608+07:00 [INF] () The resource is already, please try another.
2024-06-08T13:49:56.7422073+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 400 in 52.1980 ms
2024-06-08T13:51:05.2232875+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [KhachHang] AS [k]
        WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:51:05.2292727+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_Email_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [NhanVien] AS [n]
        WHERE [n].[Email] = @__model_Email_0 AND ([n].[TrangThai] <> N'Da xoa' OR ([n].[TrangThai] IS NULL))) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END"
2024-06-08T13:51:05.2352054+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da Xoa' OR ([k].[TrangThai] IS NULL) OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:51:05.2419219+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KhachHang] ([IDKhachHang], [CCCD], [ChiNhanhNganHang], [DiaChiHienTai], [DiaChiThuongTru], [Email], [GPLX], [HoTen], [IDLoaiKH], [NganHang], [NgaySinh], [PassWord], [SoDienThoai], [SoDienThoaiDuPhong], [SoDienThoaiNguoiThamChieu], [SoPassPort], [SoTaiKhoan], [TrangThai])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);"
2024-06-08T13:51:05.2440892+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "POST" "/api/khach-hang/add" responded 200 in 31.2212 ms
2024-06-08T13:51:30.8686813+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:51:30.8743238+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/khach-hang/get-all" responded 200 in 29.2127 ms
2024-06-08T13:52:00.6588555+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T13:52:00.6736576+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL))"
2024-06-08T13:52:00.7611398+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("64"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:52:00.8019599+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"CarRental.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint \"FK_KhachHang_LoaiKhachHang_IDLoaiKH\". The conflict occurred in database \"DB_CarRental\", table \"dbo.LoaiKhachHang\", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_KhachHang_LoaiKhachHang_IDLoaiKH". The conflict occurred in database "DB_CarRental", table "dbo.LoaiKhachHang", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-06-08T13:52:00.8829752+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 248.9759 ms
2024-06-08T13:52:55.8911192+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 30.1202 ms
2024-06-08T13:53:18.4675065+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 3.5687 ms
2024-06-08T13:53:30.4678370+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 6.8559 ms
2024-06-08T13:54:32.1804654+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 6.3392 ms
2024-06-08T13:55:11.1409748+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T13:55:11.1486839+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:55:11.1530017+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"CarRental.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint \"FK_KhachHang_LoaiKhachHang_IDLoaiKH\". The conflict occurred in database \"DB_CarRental\", table \"dbo.LoaiKhachHang\", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_KhachHang_LoaiKhachHang_IDLoaiKH". The conflict occurred in database "DB_CarRental", table "dbo.LoaiKhachHang", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-06-08T13:55:11.1992580+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 65.6998 ms
2024-06-08T13:55:27.9605279+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T13:55:27.9710985+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:55:27.9877670+07:00 [ERR] (Microsoft.EntityFrameworkCore.Update) An exception occurred in the database while saving changes for context type '"CarRental.Repository.Infrastructure.AppDbContext"'."
""Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint \"FK_KhachHang_LoaiKhachHang_IDLoaiKH\". The conflict occurred in database \"DB_CarRental\", table \"dbo.LoaiKhachHang\", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_KhachHang_LoaiKhachHang_IDLoaiKH". The conflict occurred in database "DB_CarRental", table "dbo.LoaiKhachHang", column 'IDLoaiKH'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnly(Int32 commandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
ClientConnectionId:c96d2764-28d6-4a14-a1e5-ef35738fa910
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__107_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
2024-06-08T13:55:28.0300324+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 72.2951 ms
2024-06-08T13:55:47.7329458+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=["@__Id_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T13:55:47.7462315+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("9"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:55:47.7519771+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 200 in 20.9715 ms
2024-06-08T13:55:54.0220419+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("0"ms) [Parameters=["@__Id_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T13:55:54.0273655+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:55:54.0503675+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 200 in 29.8787 ms
2024-06-08T13:56:03.4083266+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:56:03.4111103+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/khach-hang/get-all" responded 200 in 4.7365 ms
2024-06-08T13:58:01.3908376+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:58:01.4656417+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:58:01.4728262+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T13:58:01.4766383+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T13:58:01.4937525+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2024-06-08T13:58:01.5136732+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2024-06-08T13:58:01.8984037+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7046"
2024-06-08T13:58:01.9005458+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5273"
2024-06-08T13:58:01.9031477+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2024-06-08T13:58:01.9042582+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2024-06-08T13:58:01.9061902+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\DuAnThueXe\WebAPI_CarRental\CarRental"
2024-06-08T13:58:12.0367458+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)"
2024-06-08T13:58:12.1077961+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/khach-hang/get-all" responded 200 in 514.5726 ms
2024-06-08T13:58:39.6192245+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("18"ms) [Parameters=["@__Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL))"
2024-06-08T13:58:39.7650831+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("4"ms) [Parameters=["@p17='?' (Size = 450), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [KhachHang] SET [CCCD] = @p0, [ChiNhanhNganHang] = @p1, [DiaChiHienTai] = @p2, [DiaChiThuongTru] = @p3, [Email] = @p4, [GPLX] = @p5, [HoTen] = @p6, [IDLoaiKH] = @p7, [NganHang] = @p8, [NgaySinh] = @p9, [PassWord] = @p10, [SoDienThoai] = @p11, [SoDienThoaiDuPhong] = @p12, [SoDienThoaiNguoiThamChieu] = @p13, [SoPassPort] = @p14, [SoTaiKhoan] = @p15, [TrangThai] = @p16
OUTPUT 1
WHERE [IDKhachHang] = @p17;"
2024-06-08T13:58:39.7797371+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 200 in 315.5679 ms
2024-06-08T14:00:00.1900602+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T14:00:00.2567682+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T14:00:00.2684194+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT 1"
2024-06-08T14:00:00.2723680+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT OBJECT_ID(N'[__EFMigrationsHistory]');"
2024-06-08T14:00:00.2900189+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];"
2024-06-08T14:00:00.3069317+07:00 [INF] (Microsoft.EntityFrameworkCore.Migrations) No migrations were applied. The database is already up to date.
2024-06-08T14:00:00.7782887+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "https://localhost:7046"
2024-06-08T14:00:00.7794372+07:00 [INF] (Microsoft.Hosting.Lifetime) Now listening on: "http://localhost:5273"
2024-06-08T14:00:00.7826344+07:00 [INF] (Microsoft.Hosting.Lifetime) Application started. Press Ctrl+C to shut down.
2024-06-08T14:00:00.7838662+07:00 [INF] (Microsoft.Hosting.Lifetime) Hosting environment: "Development"
2024-06-08T14:00:00.7851853+07:00 [INF] (Microsoft.Hosting.Lifetime) Content root path: "D:\DuAnThueXe\WebAPI_CarRental\CarRental"
2024-06-08T14:00:21.0828865+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='1200']"
""SELECT [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)"
2024-06-08T14:00:21.1727035+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "GET" "/api/khach-hang/get-all" responded 200 in 690.9985 ms
2024-06-08T14:00:43.3071842+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("21"ms) [Parameters=["@__Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__Id_0 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL))"
2024-06-08T14:00:43.3942634+07:00 [INF] (Microsoft.EntityFrameworkCore.Database.Command) Executed DbCommand ("11"ms) [Parameters=["@__model_IDKhachHang_0='?' (Size = 450), @__model_SoTaiKhoan_1='?' (Size = 4000), @__model_Email_2='?' (Size = 4000), @__model_CCCD_3='?' (Size = 4000)"], CommandType='Text', CommandTimeout='1200']"
""SELECT TOP(1) [k].[IDKhachHang], [k].[CCCD], [k].[ChiNhanhNganHang], [k].[DiaChiHienTai], [k].[DiaChiThuongTru], [k].[Email], [k].[GPLX], [k].[HoTen], [k].[IDLoaiKH], [k].[NganHang], [k].[NgaySinh], [k].[PassWord], [k].[SoDienThoai], [k].[SoDienThoaiDuPhong], [k].[SoDienThoaiNguoiThamChieu], [k].[SoPassPort], [k].[SoTaiKhoan], [k].[TrangThai]
FROM [KhachHang] AS [k]
WHERE [k].[IDKhachHang] = @__model_IDKhachHang_0 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR [k].[Email] = @__model_Email_2 OR [k].[SoTaiKhoan] = @__model_SoTaiKhoan_1 OR ([k].[CCCD] = @__model_CCCD_3 AND ([k].[TrangThai] <> N'Da xoa' OR ([k].[TrangThai] IS NULL)))"
2024-06-08T14:00:43.3989308+07:00 [INF] () The resource is already, please try another.
2024-06-08T14:00:43.5250156+07:00 [INF] (Serilog.AspNetCore.RequestLoggingMiddleware) HTTP "PUT" "/api/khach-hang/update/KH002" responded 400 in 399.2956 ms
